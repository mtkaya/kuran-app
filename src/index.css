/* Import Arabic fonts including Quran Mushaf calligraphy */
@import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Amiri+Quran&family=Aref+Ruqaa:wght@400;700&family=Noto+Nastaliq+Urdu:wght@400;700&family=Rakkas&family=Reem+Kufi:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap');

/* KFGQPC Mushaf Font - Authentic Quran Script */
@font-face {
  font-family: 'KFGQPC Uthmanic Script Hafs';
  src: url('https://cdn.jsdelivr.net/npm/quran-fonts@1.1.4/fonts/hafs/v1/woff2/QCF_BSML.woff2') format('woff2'),
    url('https://cdn.jsdelivr.net/npm/quran-fonts@1.1.4/fonts/hafs/v1/woff/QCF_BSML.woff') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* AU LAIT Theme - Light Mode */
    /* AU LAIT #DCD7C9 - Light background */
    --background: 44 26% 82%;
    --foreground: 195 13% 20%;
    /* INKWELL for text */

    --card: 44 20% 88%;
    --card-foreground: 195 13% 20%;

    --popover: 44 20% 88%;
    --popover-foreground: 195 13% 20%;

    /* CREME BRULEE #A27B5B - Primary accent */
    --primary: 25 31% 53%;
    --primary-foreground: 44 26% 95%;

    /* LUNAR ECLIPSE for secondary */
    --secondary: 174 11% 85%;
    --secondary-foreground: 195 13% 20%;

    --muted: 44 15% 75%;
    --muted-foreground: 174 11% 35%;

    /* CREME BRULEE for accent */
    --accent: 25 31% 53%;
    --accent-foreground: 44 26% 95%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 44 18% 70%;
    --input: 44 18% 70%;
    --ring: 25 31% 53%;

    --radius: 0.75rem;

    /* Glow colors */
    --glow-primary: 25 35% 55%;
    --glow-gold: 25 40% 60%;
  }

  .dark {
    /* INKWELL #2C3639 - Dark mode background (darkest) */
    --background: 195 13% 20%;
    --foreground: 44 26% 82%;
    /* AU LAIT for text */

    /* LUNAR ECLIPSE #3F4E4F for cards */
    --card: 174 11% 28%;
    --card-foreground: 44 26% 88%;

    --popover: 174 11% 28%;
    --popover-foreground: 44 26% 88%;

    /* CREME BRULEE #A27B5B - Primary in dark mode */
    --primary: 25 31% 58%;
    --primary-foreground: 195 13% 15%;

    --secondary: 174 11% 24%;
    --secondary-foreground: 44 26% 85%;

    --muted: 195 10% 25%;
    --muted-foreground: 44 20% 65%;

    /* CREME BRULEE for accent */
    --accent: 25 31% 58%;
    --accent-foreground: 195 13% 15%;

    --destructive: 0 62.8% 45%;
    --destructive-foreground: 210 40% 98%;

    --border: 174 11% 32%;
    --input: 174 11% 32%;
    --ring: 25 31% 58%;

    --glow-primary: 25 35% 55%;
    --glow-gold: 25 40% 60%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    padding-bottom: env(safe-area-inset-bottom);
    overflow-x: hidden;
  }

  html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
    overflow-x: hidden;
    background: hsl(var(--background));
  }
}

@layer utilities {

  /* Gradient Header with Islamic Pattern */
  .gradient-header {
    background: linear-gradient(135deg,
        hsl(40 65% 55%) 0%,
        hsl(40 60% 48%) 50%,
        hsl(350 50% 30%) 100%);
    position: relative;
    overflow: hidden;
  }

  .gradient-header::before {
    content: '';
    position: absolute;
    inset: 0;
    /* Islamic Geometric Pattern - 8-pointed stars */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cg fill='none' stroke='%23ffffff' stroke-width='0.5' opacity='0.25'%3E%3C!-- 8-pointed star --%3E%3Cpath d='M30 5 L35 20 L50 15 L40 25 L55 30 L40 35 L50 45 L35 40 L30 55 L25 40 L10 45 L20 35 L5 30 L20 25 L10 15 L25 20 Z'/%3E%3C!-- Inner octagon --%3E%3Cpolygon points='30,12 42,18 48,30 42,42 30,48 18,42 12,30 18,18'/%3E%3C!-- Center circle --%3E%3Ccircle cx='30' cy='30' r='6'/%3E%3C/g%3E%3C/svg%3E");
    background-size: 60px 60px;
    opacity: 0.4;
    pointer-events: none;
    animation: patternShift 30s linear infinite;
  }

  @keyframes patternShift {
    0% {
      background-position: 0 0;
    }

    100% {
      background-position: 60px 60px;
    }
  }

  .dark .gradient-header {
    background: linear-gradient(135deg,
        hsl(350 30% 15%) 0%,
        hsl(350 25% 12%) 50%,
        hsl(40 40% 20%) 100%);
  }

  .dark .gradient-header::before {
    opacity: 0.2;
  }

  /* Glass Effect */
  .glass {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.5);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
  }

  .dark .glass {
    background: rgba(20, 35, 28, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
  }

  /* Card Glow Hover Effect */
  .card-glow {
    @apply transition-all duration-300 relative;
  }

  .card-glow::before {
    content: '';
    position: absolute;
    inset: -2px;
    background: linear-gradient(135deg, hsl(var(--glow-primary)), hsl(var(--glow-gold)));
    border-radius: inherit;
    opacity: 0;
    z-index: -1;
    transition: opacity 0.3s ease;
    filter: blur(8px);
  }

  .card-glow:hover::before {
    opacity: 0.4;
  }

  .card-glow:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
  }

  .card-glow:active {
    transform: translateY(-1px);
  }

  /* Touch-friendly button */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Besmele Banner */
  .besmele-banner {
    @apply relative overflow-hidden py-6 px-4 text-center;
    background: linear-gradient(135deg,
        hsl(var(--primary) / 0.1) 0%,
        hsl(var(--accent) / 0.05) 100%);
  }

  .besmele-banner::before,
  .besmele-banner::after {
    content: 'âœ¦';
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1.5rem;
    color: hsl(var(--primary) / 0.3);
  }

  .besmele-banner::before {
    left: 1rem;
  }

  .besmele-banner::after {
    right: 1rem;
  }

  /* Ornamental Divider */
  .ornament-divider {
    @apply flex items-center justify-center gap-3 my-2;
  }

  .ornament-divider::before,
  .ornament-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(to right,
        transparent,
        hsl(var(--primary) / 0.3),
        transparent);
  }

  /* Audio Wave Animation */
  @keyframes audioWave {

    0%,
    100% {
      transform: scaleY(0.5);
    }

    50% {
      transform: scaleY(1);
    }
  }

  .audio-wave {
    @apply flex items-center gap-0.5 h-4;
  }

  .audio-wave span {
    @apply w-0.5 bg-primary rounded-full;
    animation: audioWave 0.8s ease-in-out infinite;
  }

  .audio-wave span:nth-child(1) {
    height: 40%;
    animation-delay: 0s;
  }

  .audio-wave span:nth-child(2) {
    height: 80%;
    animation-delay: 0.1s;
  }

  .audio-wave span:nth-child(3) {
    height: 60%;
    animation-delay: 0.2s;
  }

  .audio-wave span:nth-child(4) {
    height: 100%;
    animation-delay: 0.3s;
  }

  .audio-wave span:nth-child(5) {
    height: 60%;
    animation-delay: 0.4s;
  }

  .audio-wave span:nth-child(6) {
    height: 80%;
    animation-delay: 0.5s;
  }

  .audio-wave span:nth-child(7) {
    height: 40%;
    animation-delay: 0.6s;
  }

  /* Pulse Glow for Playing State */
  @keyframes pulseGlow {

    0%,
    100% {
      box-shadow: 0 0 0 0 hsl(var(--primary) / 0.4);
    }

    50% {
      box-shadow: 0 0 20px 5px hsl(var(--primary) / 0.2);
    }
  }

  .pulse-glow {
    animation: pulseGlow 2s ease-in-out infinite;
  }

  /* Bookmark Star Burst */
  @keyframes starBurst {
    0% {
      transform: scale(0) rotate(0deg);
      opacity: 1;
    }

    100% {
      transform: scale(1.5) rotate(180deg);
      opacity: 0;
    }
  }

  .star-burst {
    animation: starBurst 0.5s ease-out forwards;
  }

  /* Fade in animation */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(15px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fadeInUp 0.4s ease-out forwards;
  }

  /* Scale in animation */
  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }

    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-scale-in {
    animation: scaleIn 0.3s ease-out forwards;
  }

  /* Slide in from right */
  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(20px);
    }

    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .animate-slide-in {
    animation: slideInRight 0.3s ease-out forwards;
  }

  /* Shimmer animation */
  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }

    100% {
      background-position: 200% 0;
    }
  }

  .shimmer {
    background: linear-gradient(90deg,
        transparent 0%,
        rgba(255, 255, 255, 0.4) 50%,
        transparent 100%);
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }

  /* Floating animation */
  @keyframes float {

    0%,
    100% {
      transform: translateY(0);
    }

    50% {
      transform: translateY(-5px);
    }
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  /* Mobile padding */
  .px-safe {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }

  /* Ayah Number Islamic Style */
  .ayah-number {
    @apply relative inline-flex items-center justify-center;
    width: 2.5rem;
    height: 2.5rem;
  }

  .ayah-number::before {
    content: '';
    position: absolute;
    inset: 0;
    border: 2px solid hsl(var(--primary));
    border-radius: 50%;
    transform: rotate(45deg);
  }

  .ayah-number::after {
    content: '';
    position: absolute;
    inset: 4px;
    border: 1px solid hsl(var(--primary) / 0.5);
    border-radius: 50%;
  }
}

/* Arabic Font - Amiri Quran */
.font-arabic {
  font-family: 'Amiri Quran', 'Amiri', 'Noto Naskh Arabic', 'Traditional Arabic', serif;
  letter-spacing: 0.03em;
  line-height: 2.2;
  word-wrap: break-word;
  overflow-wrap: break-word;
  word-break: normal;
  white-space: normal;
  max-width: 100%;
}

/* Arabic text enhancements */
.arabic-text {
  font-family: 'Amiri Quran', 'Amiri', serif;
  font-size: inherit;
  direction: rtl;
  text-align: right;
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-width: 100%;
}

/* Mushaf line mobile responsiveness */
.mushaf-line {
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-width: 100%;
  box-sizing: border-box;
}

@media (max-width: 640px) {
  .mushaf-line {
    font-size: 18px !important;
    line-height: 2 !important;
    padding-left: 4px !important;
    padding-right: 4px !important;
  }

  .font-arabic {
    font-size: 22px !important;
  }

  .mushaf-text-container {
    margin-left: -8px;
    margin-right: -8px;
  }
}

/* Number font for ayah numbers */
.number-font {
  font-family: 'Inter', -apple-system, sans-serif;
  font-feature-settings: 'tnum' on, 'lnum' on;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 5px;
  height: 5px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--primary) / 0.3);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--primary) / 0.5);
}

/* Focus styles */
:focus-visible {
  outline: 2px solid hsl(var(--primary));
  outline-offset: 2px;
}

:focus:not(:focus-visible) {
  outline: none;
}

/* Selection color */
::selection {
  background: hsl(var(--primary) / 0.2);
  color: hsl(var(--foreground));
}